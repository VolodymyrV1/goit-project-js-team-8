{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\n\nconst API_KEY = \"52413922-df6c611514e1fbd211f3ba691\";\n\nexport const per_page = 15;\n// Ця функція повинна приймати один параметр query (пошукове слово, яке є рядком), здійснювати HTTP-запит і повертати значення властивості data з отриманої відповіді.\n\nexport default async function getImagesByQuery(query, page = 1) {\n    const { data } = await axios(\"https://pixabay.com/api/\", {\n        params: {\n            key: API_KEY,\n            q: query,\n            page,\n            per_page,\n\n            image_type: \"photo\",\n            orientation: \"horizontal\",\n            safesearch: true\n        }\n    })\n    return data;\n    \n}","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\n\nlet lightbox = new SimpleLightbox(\".gallery a\", {\n  captionsData: \"alt\",\n  captionDelay: 250,\n});\n\n\n// Ця функція повинна приймати масив images, створювати HTML-розмітку для галереї, додавати її в контейнер галереї та викликати метод екземпляра SimpleLightbox refresh(). Нічого не повертає.\n\nexport function createGallery(images) {\n    const gallery = document.querySelector(\".gallery\");\n    const markup = images.map(({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) => `\n            <li class=\"photo-card\">\n                <a href=\"${largeImageURL}\">\n                    <img src=\"${webformatURL}\" alt=\"${tags}\"  class=\"img-card\"/>\n                </a>\n                <div class=\"photo-info\">\n                    <div class=\"info-item\">\n                        <span class=\"label\">Likes</span>\n                        <span class=\"value\">${likes}</span>\n                    </div>\n                    <div class=\"info-item\">\n                        <span class=\"label\">Views</span>\n                        <span class=\"value\">${views}</span>\n                    </div>\n                    <div class=\"info-item\">\n                        <span class=\"label\">Comments</span>\n                        <span class=\"value\">${comments}</span>\n                    </div>\n                    <div class=\"info-item\">\n                        <span class=\"label\">Downloads</span>\n                        <span class=\"value\">${downloads}</span>\n                    </div>\n                </div>          \n            </li>\n            `).join(\"\");\n    \n    gallery.insertAdjacentHTML(\"beforeend\", markup);\n    lightbox.refresh();       \n}\n\n\n\n// Ця функція нічого не приймає та повинна очищати вміст контейнера галереї. Нічого не повертає.\nexport function clearGallery() {\n    document.querySelector(\".gallery\").innerHTML = \"\";\n}\n\n// Ця функція нічого не приймає, повинна додавати клас для відображення лоадера. Нічого не повертає.\nexport function showLoader() {\n    document.querySelector(\".loader\").classList.remove(\"hidden\");\n}\n\n\n// Ця функція нічого не приймає, повинна прибирати клас для відображення лоадера. Нічого не повертає.\nexport function hideLoader() {\n    document.querySelector(\".loader\").classList.add(\"hidden\");\n}\n\n// Ця функція нічого не приймає, повинна додавати клас для відображення кнопки Load more. Нічого не повертає.\nexport function showLoadMoreButton() {\n    document.querySelector(\".moreBtn\").classList.remove(\"hidden\");\n\n}\n\n// Ця функція нічого не приймає, повинна прибирати клас для відображення кнопки Load more. Нічого не повертає.\nexport function hideLoadMoreButton() {\n    document.querySelector(\".moreBtn\").classList.add(\"hidden\");\n    \n}","import './css/comon.css';\n\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport getImagesByQuery, { per_page } from \"./js/pixabay-api\";\nimport { createGallery, clearGallery, showLoader, hideLoader, showLoadMoreButton, hideLoadMoreButton } from \"./js/render-functions\";\n\n\nconst form = document.querySelector(\".form\");\nconst moreBtn = document.querySelector(\".moreBtn\")\n\nlet searchResult;\n\nlet page;\n\n\nform.addEventListener(\"submit\", handlerSubmit);\nmoreBtn.addEventListener(\"click\", onLoadMore);\n\nasync function handlerSubmit(event) {\n    event.preventDefault();\n    page = 1;\n\n    clearGallery();\n    searchResult = event.target.elements['search-text'].value.trim();\n\n    if (searchResult === \"\") {\n        showToast(\"Sorry, you didn’t enter any value!\");\n        form.reset();\n        return;\n    }\n\n    showLoader();\n    \n\n    try {\n        const data = await getImagesByQuery(searchResult, page);\n        \n        if (data.hits.length === 0) {\n                showToast(\"Sorry, there are no images matching your search query. Please try again!\");\n                hideLoadMoreButton();\n                return;\n            }       \n        createGallery(data.hits);         \n\n        if (checkLastPage(data, page, per_page)) {\n            endOfResults();\n        } else {\n            showLoadMoreButton();\n            }         \n\n    } catch (error) {\n        showToast(`EROR, ${error}`);\n        console.log(error);\n        hideLoadMoreButton();\n         \n    } finally {\n        hideLoader(); \n        form.reset();\n    }        \n    \n}\n\nasync function onLoadMore() {\n    page += 1;\n    moreBtn.disabled = true;\n    showLoader();\n\n        try {\n            const data = await getImagesByQuery(searchResult, page);\n            \n            createGallery(data.hits);\n            scrollGallery();\n            if (checkLastPage(data, page, per_page)) {\n                endOfResults();\n            }\n\n        } catch (error) {\n            showToast(`EROR, ${error}`);\n            console.log(error);               \n        } finally {           \n            moreBtn.disabled = false;\n            hideLoader();\n        }   \n}\n\n\n\nfunction showToast(message, backgroundColor = '#EF4040', showIcon = true) {\n    const options = {\n        message,\n        position: 'topRight',\n        backgroundColor,\n        messageColor: '#ffffff',\n    };\n\n    if (!showIcon) {\n        options.icon = false;\n    }\n\n    iziToast.error(options);\n}\n\n\n\n\nfunction checkLastPage(data, page, per_page) {\n    const totalPage = Math.ceil(data.totalHits / per_page);\n    return page >= totalPage;    \n}\n\n\nfunction endOfResults() {\n    hideLoadMoreButton();\n    showToast(\"We're sorry, but you've reached the end of search results.\", \"#3A86FF\", false);\n}\n\nfunction scrollGallery() {\n    const card = document.querySelector(\".gallery .photo-card\");\n    if (!card) {\n        return;\n    }\n\n    const cardHeight = card.getBoundingClientRect().height;\n\n    window.scrollBy({\n        top: cardHeight * 2,\n        behavior: \"smooth\"\n    });\n}\n    \n"],"names":["API_KEY","per_page","getImagesByQuery","query","page","data","axios","lightbox","SimpleLightbox","createGallery","images","gallery","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","clearGallery","showLoader","hideLoader","showLoadMoreButton","hideLoadMoreButton","form","moreBtn","searchResult","handlerSubmit","onLoadMore","event","showToast","checkLastPage","endOfResults","error","scrollGallery","message","backgroundColor","showIcon","options","iziToast","totalPage","card","cardHeight"],"mappings":"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"}