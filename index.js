import{S as B,a as x,K as G,M as H,N as K,P as U,A as R,i as v}from"./assets/vendor-DPW2_z21.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function o(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(n){if(n.ep)return;n.ep=!0;const i=o(n);fetch(n.href,i)}})();const A=document.querySelector(".navbar-mobile"),Y=document.querySelector(".menu-btn"),J=document.querySelector(".navbar-close-btn"),Q=document.querySelectorAll(".navbar-nav-link");Y.addEventListener("click",()=>{A.classList.add("is-open"),document.body.classList.add("menu-open"),document.querySelector("body").style.overflow="hidden"});J.addEventListener("click",()=>{A.classList.remove("is-open"),document.body.classList.remove("menu-open"),document.querySelector("body").style.overflow="auto"});Q.forEach(e=>{e.addEventListener("click",()=>{A.classList.remove("is-open"),document.body.classList.remove("menu-open"),document.querySelector("body").style.overflow="auto"})});const w=new B("#hero-swiper",{slidesPerView:1,loop:!1,speed:600,allowTouchMove:!1,effect:"fade",fadeEffect:{crossFade:!0},on:{slideChange:j}}),y=document.getElementById("hero-prev"),f=document.getElementById("hero-next");y.addEventListener("click",()=>w.slidePrev());f.addEventListener("click",()=>w.slideNext());function j(){y.disabled=w.isBeginning,f.disabled=w.isEnd,y.classList.toggle("disabled",y.disabled),f.classList.toggle("disabled",f.disabled)}j();let d=[],m=0;const X=4,b=document.getElementById("load-more"),a=document.getElementById("category-list"),C=document.getElementById("books-list"),V=document.getElementById("category-count"),h=document.querySelector(".loader-back");async function Z(){if(a)try{let t=(await x.get("https://books-backend.p.goit.global/books/category-list")).data;t.sort((s,c)=>s.list_name.localeCompare(c.list_name));const r=[{list_name:"All categories"},...t.filter(s=>s.list_name&&s.list_name.trim()!=="")].map(({list_name:s})=>`<li class="category-item">${s}</li>`).join("");a.innerHTML=r;const n=a.querySelector(".category-item");n&&n.classList.add("active"),a.addEventListener("click",s=>{const c=s.target.closest(".category-item");if(!c)return;a.querySelectorAll(".category-item").forEach(S=>S.classList.remove("active")),c.classList.add("active");const u=c.textContent;_(u),window.innerWidth<1440&&a.classList.remove("show")});const i=document.querySelector(".dropdown-btn");i&&a&&(i.addEventListener("click",()=>{a.classList.toggle("show")}),window.addEventListener("resize",()=>{window.innerWidth>=768&&a.classList.remove("show")})),_("All categories")}catch(e){console.error("Помилка при завантаженні категорій:",e)}}async function _(e){if(C)try{ee();let t;e==="All categories"?t="https://books-backend.p.goit.global/books/top-books":t=`https://books-backend.p.goit.global/books/category?category=${encodeURIComponent(e)}`;let r=(await x.get(t)).data;e==="All categories"?r=r.flatMap(s=>s.books):r=r.flat(),r=r.filter((s,c,u)=>c===u.findIndex(S=>S.title===s.title)),d=r;const i=window.innerWidth<1440?10:24;m=Math.min(i,d.length),$(),M()}catch(t){console.error("Помилка при завантаженні книг:",t)}finally{te()}}function $(){C.innerHTML="";const e=d.slice(0,m),t=e.map(o=>{const r=o.title?o.title.toLowerCase():"без назви",n=o.author?o.author.toLowerCase():"невідомий автор",i=o.price||"немає ціни",s=o._id;return`
        <li class="books-item-wraper">
          <div class="book-item-container">
            <div class="books-img-wraper">
              <img src="${o.book_image||"https://via.placeholder.com/227x322?text=No+Image"}" alt="${r}" class="books-img"/>
            </div>
            <div class="books-info-wraper">
              <div class="books-text-wraper">
                <h4>${r}</h4>
                <p>${n}</p>
              </div>
              <div class="books-price-wraper">
                <p>$${i}</p>
              </div>
            </div>
            <div class="button-wraper">
              <button type="button" class="books-button btn" id="${s}">Learn More</button>
            </div>
          </div>
        </li>
      `}).join("");C.insertAdjacentHTML("beforeend",t),V&&(V.textContent=`Showing ${e.length} з ${d.length}`)}function M(){b&&(m>=d.length?b.style.display="none":b.style.display="block")}b&&b.addEventListener("click",()=>{m=Math.min(m+X,d.length),$(),M()});window.addEventListener("resize",()=>{if(!d.length)return;const t=window.innerWidth<1440?10:24;m<t&&(m=Math.min(t,d.length),$(),M())});document.addEventListener("DOMContentLoaded",()=>{Z()});function ee(){h&&(h.style.display="flex")}function te(){h&&(h.style.display="none")}document.addEventListener("DOMContentLoaded",()=>{const e=new B(".swiper-feedbacks",{modules:[G,H],slidesPerView:1,spaceBetween:24,speed:600,keyboard:{enabled:!0,onlyInViewport:!0},mousewheel:!0,simulateTouch:!0,breakpoints:{375:{slidesPerView:1,slidesPerGroup:1,spaceBetween:16},768:{slidesPerView:2,slidesPerGroup:2,spaceBetween:24},1440:{slidesPerView:3,slidesPerGroup:3,spaceBetween:24}}}),t=document.querySelector(".arrow.left"),o=document.querySelector(".arrow.right"),r=document.querySelectorAll(".dot");function n(){const s=window.innerWidth;return s<768?1:s<1440?2:3}function i(){const s=Math.floor(e.activeIndex/n());r.forEach((c,u)=>c.classList.toggle("active",u===Math.min(s,r.length-1))),t.disabled=e.isBeginning,o.disabled=e.isEnd,t.classList.toggle("disabled",e.isBeginning),o.classList.toggle("disabled",e.isEnd)}t.addEventListener("click",()=>{e.slidePrev(),t.blur()}),o.addEventListener("click",()=>{e.slideNext(),o.blur()}),r.forEach((s,c)=>{s.addEventListener("click",()=>{const u=Math.floor(c*e.slides.length/r.length);e.slideTo(u)})}),e.on("slideChange",i),window.addEventListener("resize",i),i()});const g=new B(".events-swiper",{modules:[K,U],wrapperClass:"events-list",slideClass:"events-item",slidesPerView:1,spaceBetween:24,breakpoints:{768:{slidesPerView:2,spaceBetween:24},1440:{slidesPerView:3,spaceBetween:24}},pagination:{el:".events-pagination",clickable:!0,bulletElement:"li",bulletClass:"events-dot",bulletActiveClass:"events-dot--active",renderBullet:(e,t)=>`<li class="${t}" aria-label="Go to slide ${e+1}" tabindex="0"></li>`},navigation:{prevEl:".events-swipe-btn-prev",nextEl:".events-swipe-btn-next"},watchOverflow:!0}),W=document.querySelector(".events-swipe-btn-prev"),F=document.querySelector(".events-swipe-btn-next");function k(){const e=g.isBeginning,t=g.isEnd;W.toggleAttribute("disabled",e),F.toggleAttribute("disabled",t),W.setAttribute("aria-disabled",String(e)),F.setAttribute("aria-disabled",String(t))}g.on("afterInit",k);g.on("slideChange",k);g.on("update",k);k();const oe=async e=>await x.get(`https://books-backend.p.goit.global/books/${e}`),D=document.querySelector(".loader-back"),ne=document.querySelector(".count-block"),P=document.querySelector(".book-crd-author"),I=document.querySelector(".book-crd-title"),p=document.querySelector(".image"),se=document.querySelector(".close-btn"),L=document.querySelector(".modal_back"),q=document.querySelector(".minus"),re=document.querySelector(".plus"),N=document.querySelector(".txt-count"),O=document.querySelector(".book-crd-price"),ie=document.querySelector(".accordion-container"),ce=document.querySelector(".txt-details"),le=document.querySelector(".add-btn"),ae=document.querySelector(".buy-btn"),de=document.querySelector(".books-list");let l=1,T=0;const z=new R(ie,{collapse:!0,showMultiple:!0,duration:400,triggerClass:"ac-title",beforeOpen:e=>{e.querySelector(".icon-ac-down").classList.add("rotate")},beforeClose:e=>{e.querySelector(".icon-ac-down").classList.remove("rotate")}}),ue=async e=>{try{D.classList.toggle("is-open");const o=(await oe(e)).data;T+=o.price,p.setAttribute("src",`${o.book_image}`),p.setAttribute("alt",`${o.title}`),I.textContent=o.title,P.textContent=o.author,O.textContent=`$${o.price}`,N.textContent=`${String(l)}`,ce.textContent=o.description,z.update()}catch{document.querySelector(".error").classList.add("is-open"),document.querySelector(".modal").style.overflow="hidden",v.error({title:"Error",message:"Not found 404",position:"topCenter"})}finally{D.classList.toggle("is-open")}};ne.addEventListener("click",e=>{e.target===q?(l--,console.log("-")):e.target===re&&(l++,console.log("+")),l===0?q.disabled=!0:q.disabled=!1,N.textContent=`${String(l)}`,O.textContent=`$${String((l*Number(T)).toFixed(2))}`});se.addEventListener("click",e=>{E()});document.addEventListener("keydown",e=>{e.key==="Escape"&&E()});const me=e=>{L.classList.add("is-open"),document.querySelector("body").style.overflow="hidden",ue(e)},E=()=>{document.querySelector("body").style.overflow="auto",L.classList.remove("is-open"),pe()},pe=()=>{p.hasAttribute("src")&&p.hasAttribute("alt")&&(p.removeAttribute("src"),p.removeAttribute("alt"),I.textContent="",P.textContent="",O.textContent="$0"),T=0,l=1,N.textContent="",z.closeAll(),document.querySelector(".error").classList.remove("is-open"),document.querySelector(".modal").style.overflow="auto"};le.addEventListener("click",e=>{l===0?v.info({title:"You have not selected anything",color:"yellow"}):v.info({title:`${l} ${l===1?"book":"books"} "${I.textContent}" by author ${P.textContent} Added`})});ae.addEventListener("click",e=>{v.success({title:"Thank you for your purchase"}),setTimeout(()=>{E()},1e3)});L.addEventListener("click",e=>{e.target===L&&E()});de.addEventListener("click",e=>{const t=e.target.closest(".books-button");t&&me(t.id)});document.querySelector(".events-section")?.addEventListener("click",e=>{e.target.closest(".js-register")&&window.dispatchEvent(new CustomEvent("open-register-modal"))});document.addEventListener("DOMContentLoaded",function(){const e=document.querySelector(".modal.modal-contacts"),t=e?.querySelector(".modal_close-btn"),o=e?.querySelector("#contactForm");if(!e||!t)return;window.addEventListener("open-register-modal",function(){e.classList.add("is-open"),document.body.classList.add("modal-open"),document.querySelector("body").style.overflow="hidden"});function r(){e.classList.remove("is-open"),document.body.classList.remove("modal-open"),document.querySelector("body").style.overflow="auto",o&&o.reset()}t.addEventListener("click",r),e.addEventListener("click",function(n){n.target===e&&r()}),document.addEventListener("keydown",function(n){n.key==="Escape"&&e.classList.contains("is-open")&&r()}),o&&(o.addEventListener("submit",function(n){n.preventDefault();let i=!0;o.querySelectorAll("input[required]").forEach(c=>{c.value.trim()?c.classList.remove("invalid"):(c.classList.add("invalid"),i=!1)}),i&&(console.log("Форма отправлена!"),r())}),o.querySelectorAll(".form-control").forEach(n=>{n.addEventListener("input",function(){this.classList.remove("invalid")})}))});
//# sourceMappingURL=index.js.map
