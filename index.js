import{a as B,S as H,N as z,P as U,A as G,i as y}from"./assets/vendor-BWZFsOUI.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(o){if(o.ep)return;o.ep=!0;const s=n(o);fetch(o.href,s)}})();const x=document.querySelector(".navbar-mobile"),K=document.querySelector(".menu-btn"),R=document.querySelector(".navbar-close-btn"),Y=document.querySelectorAll(".navbar-nav-link");K.addEventListener("click",()=>{x.classList.add("is-open"),document.body.classList.add("menu-open")});R.addEventListener("click",()=>{x.classList.remove("is-open"),document.body.classList.remove("menu-open")});Y.forEach(e=>{e.addEventListener("click",()=>{x.classList.remove("is-open"),document.body.classList.remove("menu-open")})});const v=new Swiper("#hero-swiper",{slidesPerView:1,loop:!1,speed:600,allowTouchMove:!1,effect:"fade",fadeEffect:{crossFade:!0},on:{slideChange:V}}),g=document.getElementById("hero-prev"),f=document.getElementById("hero-next");g.addEventListener("click",()=>v.slidePrev());f.addEventListener("click",()=>v.slideNext());function V(){g.disabled=v.isBeginning,f.disabled=v.isEnd,g.classList.toggle("disabled",g.disabled),f.classList.toggle("disabled",f.disabled)}V();let d=[],u=0;const J=4,p=document.getElementById("load-more"),a=document.getElementById("category-list"),C=document.getElementById("books-list"),_=document.getElementById("category-count"),h=document.querySelector(".loader-back");async function Q(){if(a)try{let t=(await B.get("https://books-backend.p.goit.global/books/category-list")).data;t.sort((i,c)=>i.list_name.localeCompare(c.list_name));const r=[{list_name:"All categories"},...t.filter(i=>i.list_name&&i.list_name.trim()!=="")].map(({list_name:i})=>`<li class="category-item">${i}</li>`).join("");a.innerHTML=r;const o=a.querySelector(".category-item");o&&o.classList.add("active"),a.addEventListener("click",i=>{const c=i.target.closest(".category-item");if(!c)return;a.querySelectorAll(".category-item").forEach(S=>S.classList.remove("active")),c.classList.add("active");const E=c.textContent;T(E),window.innerWidth<768&&a.classList.remove("show")});const s=document.querySelector(".dropdown-btn");s&&a&&(s.addEventListener("click",()=>{a.classList.toggle("show")}),window.addEventListener("resize",()=>{window.innerWidth>=768&&a.classList.remove("show")})),T("All categories")}catch(e){console.error("Помилка при завантаженні категорій:",e)}}async function T(e){if(C)try{X();let t;e==="All categories"?t="https://books-backend.p.goit.global/books/top-books":t=`https://books-backend.p.goit.global/books/category?category=${encodeURIComponent(e)}`;let r=(await B.get(t)).data;e==="All categories"?r=r.flatMap(i=>i.books):r=r.flat(),r=r.filter((i,c,E)=>c===E.findIndex(S=>S.title===i.title)),d=r;const s=window.innerWidth<1440?10:24;u=Math.min(s,d.length),$(),A()}catch(t){console.error("Помилка при завантаженні книг:",t)}finally{Z()}}function $(){C.innerHTML="";const e=d.slice(0,u),t=e.map(n=>{const r=n.title?n.title.toLowerCase():"без назви",o=n.author?n.author.toLowerCase():"невідомий автор",s=n.price||"немає ціни",i=n._id;return`
        <li class="books-item-wraper">
          <div class="book-item-container">
            <div class="books-img-wraper">
              <img src="${n.book_image||"https://via.placeholder.com/227x322?text=No+Image"}" alt="${r}" class="books-img"/>
            </div>
            <div class="books-info-wraper">
              <div class="books-text-wraper">
                <h4>${r}</h4>
                <p>${o}</p>
              </div>
              <div class="books-price-wraper">
                <p>$${s}</p>
              </div>
            </div>
            <div class="button-wraper">
              <button type="button" class="books-button btn" id="${i}">Learn More</button>
            </div>
          </div>
        </li>
      `}).join("");C.insertAdjacentHTML("beforeend",t),_&&(_.textContent=`Showing ${e.length} з ${d.length}`)}function A(){p&&(u>=d.length?p.style.display="none":p.style.display="block")}p&&p.addEventListener("click",()=>{u=Math.min(u+J,d.length),$(),A()});window.addEventListener("resize",()=>{if(!d.length)return;const t=window.innerWidth<1440?10:24;u<t&&(u=Math.min(t,d.length),$(),A())});document.addEventListener("DOMContentLoaded",()=>{Q()});function X(){h&&(h.style.display="flex")}function Z(){h&&(h.style.display="none")}const b=new H(".events-swiper",{modules:[z,U],wrapperClass:"events-list",slideClass:"events-item",slidesPerView:1,spaceBetween:24,breakpoints:{768:{slidesPerView:2,spaceBetween:24},1440:{slidesPerView:3,spaceBetween:24}},pagination:{el:".events-pagination",clickable:!0,bulletElement:"li",bulletClass:"events-dot",bulletActiveClass:"events-dot--active",renderBullet:(e,t)=>`<li class="${t}" aria-label="Go to slide ${e+1}" tabindex="0"></li>`},navigation:{prevEl:".events-swipe-btn-prev",nextEl:".events-swipe-btn-next"},watchOverflow:!0}),W=document.querySelector(".events-swipe-btn-prev"),F=document.querySelector(".events-swipe-btn-next");function k(){const e=b.isBeginning,t=b.isEnd;W.toggleAttribute("disabled",e),F.toggleAttribute("disabled",t),W.setAttribute("aria-disabled",String(e)),F.setAttribute("aria-disabled",String(t))}b.on("afterInit",k);b.on("slideChange",k);b.on("update",k);k();const ee=async e=>await B.get(`https://books-backend.p.goit.global/books/${e}`),D=document.querySelector(".loader-back"),te=document.querySelector(".count-block"),M=document.querySelector(".book-crd-author"),I=document.querySelector(".book-crd-title"),m=document.querySelector(".image"),oe=document.querySelector(".close-btn"),L=document.querySelector(".modal_back"),q=document.querySelector(".minus"),ne=document.querySelector(".plus"),P=document.querySelector(".txt-count"),N=document.querySelector(".book-crd-price"),se=document.querySelector(".accordion-container"),re=document.querySelector(".txt-details"),ie=document.querySelector(".add-btn"),ce=document.querySelector(".buy-btn"),le=document.querySelector(".books-list");let l=1,O=0;const j=new G(se,{collapse:!0,showMultiple:!0,duration:400,triggerClass:"ac-title",beforeOpen:e=>{e.querySelector(".icon-ac-down").classList.add("rotate")},beforeClose:e=>{e.querySelector(".icon-ac-down").classList.remove("rotate")}}),ae=async e=>{try{D.classList.toggle("is-open");const n=(await ee(e)).data;O+=n.price,m.setAttribute("src",`${n.book_image}`),m.setAttribute("alt",`${n.title}`),I.textContent=n.title,M.textContent=n.author,N.textContent=`$${n.price}`,P.textContent=`${String(l)}`,re.textContent=n.description,j.update()}catch{document.querySelector(".error").classList.add("is-open"),document.querySelector(".modal").style.overflow="hidden",y.error({title:"Error",message:"Not found 404",position:"topCenter"})}finally{D.classList.toggle("is-open")}};te.addEventListener("click",e=>{e.target===q?(l--,console.log("-")):e.target===ne&&(l++,console.log("+")),l===0?q.disabled=!0:q.disabled=!1,P.textContent=`${String(l)}`,N.textContent=`$${String((l*Number(O)).toFixed(2))}`});oe.addEventListener("click",e=>{w()});document.addEventListener("keydown",e=>{e.key==="Escape"&&w()});const de=e=>{L.classList.add("is-open"),document.querySelector("body").style.overflow="hidden",ae(e)},w=()=>{document.querySelector("body").style.overflow="auto",L.classList.remove("is-open"),ue()},ue=()=>{m.hasAttribute("src")&&m.hasAttribute("alt")&&(m.removeAttribute("src"),m.removeAttribute("alt"),I.textContent="",M.textContent="",N.textContent="$0"),O=0,l=1,P.textContent="",j.closeAll(),document.querySelector(".error").classList.remove("is-open"),document.querySelector(".modal").style.overflow="auto"};ie.addEventListener("click",e=>{l===0?y.info({title:"You have not selected anything",color:"yellow"}):y.info({title:`${l} ${l===1?"book":"books"} "${I.textContent}" by author ${M.textContent} Added`})});ce.addEventListener("click",e=>{y.success({title:"Thank you for your purchase"}),setTimeout(()=>{w()},1e3)});L.addEventListener("click",e=>{e.target===L&&w()});le.addEventListener("click",e=>{const t=e.target.closest(".books-button");t&&de(t.id)});document.querySelector(".events-section")?.addEventListener("click",e=>{e.target.closest(".js-register")&&window.dispatchEvent(new CustomEvent("open-register-modal"))});document.addEventListener("DOMContentLoaded",function(){const e=document.querySelector(".modal.modal-contacts"),t=e?.querySelector(".modal_close-btn"),n=e?.querySelector("#contactForm");if(!e||!t)return;window.addEventListener("open-register-modal",function(){e.classList.add("is-open"),document.body.classList.add("modal-open")});function r(){e.classList.remove("is-open"),document.body.classList.remove("modal-open"),n&&n.reset()}t.addEventListener("click",r),e.addEventListener("click",function(o){o.target===e&&r()}),document.addEventListener("keydown",function(o){o.key==="Escape"&&e.classList.contains("is-open")&&r()}),n&&(n.addEventListener("submit",function(o){o.preventDefault();let s=!0;n.querySelectorAll("input[required]").forEach(c=>{c.value.trim()?c.classList.remove("invalid"):(c.classList.add("invalid"),s=!1)}),s&&(console.log("Форма отправлена!"),r())}),n.querySelectorAll(".form-control").forEach(o=>{o.addEventListener("input",function(){this.classList.remove("invalid")})}))});
//# sourceMappingURL=index.js.map
