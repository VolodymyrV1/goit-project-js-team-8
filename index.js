import{S as $,a as A,K as G,M as K,N as U,P as Y,A as R,i as h}from"./assets/vendor-DPW2_z21.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const r of i.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&n(r)}).observe(document,{childList:!0,subtree:!0});function s(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(o){if(o.ep)return;o.ep=!0;const i=s(o);fetch(o.href,i)}})();const M=document.querySelector(".navbar-mobile"),J=document.querySelector(".menu-btn"),Q=document.querySelector(".navbar-close-btn"),X=document.querySelectorAll(".navbar-nav-link");J.addEventListener("click",()=>{M.classList.add("is-open"),document.body.classList.add("menu-open"),document.querySelector("body").style.overflow="hidden"});Q.addEventListener("click",()=>{M.classList.remove("is-open"),document.body.classList.remove("menu-open"),document.querySelector("body").style.overflow="auto"});X.forEach(e=>{e.addEventListener("click",()=>{M.classList.remove("is-open"),document.body.classList.remove("menu-open"),document.querySelector("body").style.overflow="auto"})});const L=new $("#hero-swiper",{slidesPerView:1,loop:!1,speed:600,allowTouchMove:!1,effect:"fade",fadeEffect:{crossFade:!0},on:{slideChange:j}}),v=document.getElementById("hero-prev"),w=document.getElementById("hero-next");v.addEventListener("click",()=>L.slidePrev());w.addEventListener("click",()=>L.slideNext());function j(){v.disabled=L.isBeginning,w.disabled=L.isEnd,v.classList.toggle("disabled",v.disabled),w.classList.toggle("disabled",w.disabled)}j();let a=[],m=0;const Z=4,y=document.getElementById("load-more"),d=document.getElementById("category-list"),b=document.getElementById("books-list"),k=document.getElementById("category-count"),E=document.querySelector(".loader-back");async function ee(){if(d)try{let t=(await A.get("https://books-backend.p.goit.global/books/category-list")).data;t.sort((r,l)=>r.list_name.localeCompare(l.list_name));const n=[{list_name:"All categories"},...t.filter(r=>r.list_name&&r.list_name.trim()!=="")].map(({list_name:r})=>`<li class="category-item">${r}</li>`).join("");d.innerHTML=n;const o=d.querySelector(".category-item");o&&o.classList.add("active"),d.addEventListener("click",r=>{const l=r.target.closest(".category-item");if(!l)return;d.querySelectorAll(".category-item").forEach(B=>B.classList.remove("active")),l.classList.add("active");const u=l.textContent;W(u),window.innerWidth<1440&&d.classList.remove("show")});const i=document.querySelector(".dropdown-btn");i&&d&&(i.addEventListener("click",()=>{d.classList.toggle("show")}),window.addEventListener("resize",()=>{window.innerWidth>=768&&d.classList.remove("show")})),W("All categories")}catch(e){console.error("Помилка при завантаженні категорій:",e)}}async function W(e){if(b)try{te();let t;e==="All categories"?t="https://books-backend.p.goit.global/books/top-books":t=`https://books-backend.p.goit.global/books/category?category=${encodeURIComponent(e)}`;let n=(await A.get(t)).data;e==="All categories"?n=n.flatMap(r=>r.books):n=n.flat(),n=n.filter((r,l,u)=>l===u.findIndex(B=>B.title===r.title)),a=n;const i=window.innerWidth<1440?10:24;m=Math.min(i,a.length),b.innerHTML="",P(!1),I()}catch(t){console.error("Помилка при завантаженні книг:",t)}finally{oe()}}function P(e=!1){const s=a.slice(e?b.children.length:0,m).map(n=>{const o=n.title?n.title.toLowerCase():"без назви",i=n.author?n.author.toLowerCase():"невідомий автор",r=n.price||"немає ціни",l=n._id;return`
        <li class="books-item-wraper">
          <div class="book-item-container">
            <div class="books-img-wraper">
              <img src="${n.book_image||"https://via.placeholder.com/227x322?text=No+Image"}" alt="${o}" class="books-img"/>
            </div>
            <div class="books-info-wraper">
              <div class="books-text-wraper">
                <h4>${o}</h4>
                <p>${i}</p>
              </div>
              <div class="books-price-wraper">
                <p>$${r}</p>
              </div>
            </div>
            <div class="button-wraper">
              <button type="button" class="books-button btn" id="${l}">Learn More</button>
            </div>
          </div>
        </li>
      `}).join("");e?b.insertAdjacentHTML("beforeend",s):b.innerHTML=s,k&&(k.textContent=`Показано ${b.children.length} з ${a.length}`)}y&&y.addEventListener("click",()=>{m=Math.min(m+Z,a.length),P(!0),I(),y.blur()});function I(){y&&(m>=a.length?y.style.display="none":y.style.display="block",k&&(k.textContent=`Показано ${m} з ${a.length}`))}window.addEventListener("resize",()=>{if(!a.length)return;const t=window.innerWidth<1440?10:24;m<t&&(m=Math.min(t,a.length),P(!1),I())});document.addEventListener("DOMContentLoaded",()=>{ee()});function te(){E&&(E.style.display="flex")}function oe(){E&&(E.style.display="none")}document.addEventListener("DOMContentLoaded",()=>{const e=new $(".swiper-feedbacks",{modules:[G,K],slidesPerView:1,spaceBetween:24,speed:600,keyboard:{enabled:!0,onlyInViewport:!0},mousewheel:!0,simulateTouch:!0,breakpoints:{375:{slidesPerView:1,slidesPerGroup:1,spaceBetween:16},768:{slidesPerView:2,slidesPerGroup:2,spaceBetween:24},1440:{slidesPerView:3,slidesPerGroup:3,spaceBetween:24}}}),t=document.querySelector(".arrow.left"),s=document.querySelector(".arrow.right"),n=document.querySelectorAll(".dot");function o(){const r=window.innerWidth;return r<768?1:r<1440?2:3}function i(){const r=Math.floor(e.activeIndex/o());n.forEach((l,u)=>l.classList.toggle("active",u===Math.min(r,n.length-1))),t.disabled=e.isBeginning,s.disabled=e.isEnd,t.classList.toggle("disabled",e.isBeginning),s.classList.toggle("disabled",e.isEnd)}t.addEventListener("click",()=>{e.slidePrev(),t.blur()}),s.addEventListener("click",()=>{e.slideNext(),s.blur()}),n.forEach((r,l)=>{r.addEventListener("click",()=>{const u=Math.floor(l*e.slides.length/n.length);e.slideTo(u)})}),e.on("slideChange",i),window.addEventListener("resize",i),i()});const f=new $(".events-swiper",{modules:[U,Y],wrapperClass:"events-list",slideClass:"events-item",slidesPerView:1,spaceBetween:24,breakpoints:{768:{slidesPerView:2,spaceBetween:24},1440:{slidesPerView:3,spaceBetween:24}},pagination:{el:".events-pagination",clickable:!0,bulletElement:"li",bulletClass:"events-dot",bulletActiveClass:"events-dot--active",renderBullet:(e,t)=>`<li class="${t}" aria-label="Go to slide ${e+1}" tabindex="0"></li>`},navigation:{prevEl:".events-swipe-btn-prev",nextEl:".events-swipe-btn-next"},watchOverflow:!0}),F=document.querySelector(".events-swipe-btn-prev"),D=document.querySelector(".events-swipe-btn-next");function q(){const e=f.isBeginning,t=f.isEnd;F.toggleAttribute("disabled",e),D.toggleAttribute("disabled",t),F.setAttribute("aria-disabled",String(e)),D.setAttribute("aria-disabled",String(t))}f.on("afterInit",q);f.on("slideChange",q);f.on("update",q);q();const ne=async e=>await A.get(`https://books-backend.p.goit.global/books/${e}`),H=document.querySelector(".loader-back"),se=document.querySelector(".count-block"),T=document.querySelector(".book-crd-author"),N=document.querySelector(".book-crd-title"),p=document.querySelector(".image"),re=document.querySelector(".close-btn"),S=document.querySelector(".modal_back"),x=document.querySelector(".minus"),ie=document.querySelector(".plus"),O=document.querySelector(".txt-count"),V=document.querySelector(".book-crd-price"),le=document.querySelector(".accordion-container"),ce=document.querySelector(".txt-details"),de=document.querySelector(".add-btn"),ae=document.querySelector(".buy-btn"),ue=document.querySelector(".books-list");let c=1,_=0;const z=new R(le,{collapse:!0,showMultiple:!0,duration:400,triggerClass:"ac-title",beforeOpen:e=>{e.querySelector(".icon-ac-down").classList.add("rotate")},beforeClose:e=>{e.querySelector(".icon-ac-down").classList.remove("rotate")}}),me=async e=>{try{H.classList.toggle("is-open");const s=(await ne(e)).data;_+=s.price,p.setAttribute("src",`${s.book_image}`),p.setAttribute("alt",`${s.title}`),N.textContent=s.title,T.textContent=s.author,V.textContent=`$${s.price}`,O.textContent=`${String(c)}`,ce.textContent=s.description,z.update()}catch{document.querySelector(".error").classList.add("is-open"),document.querySelector(".modal").style.overflow="hidden",h.error({title:"Error",message:"Not found 404",position:"topCenter"})}finally{H.classList.toggle("is-open")}};se.addEventListener("click",e=>{e.target===x?(c--,console.log("-")):e.target===ie&&(c++,console.log("+")),c===0?x.disabled=!0:x.disabled=!1,O.textContent=`${String(c)}`,V.textContent=`$${String((c*Number(_)).toFixed(2))}`});re.addEventListener("click",e=>{C()});document.addEventListener("keydown",e=>{e.key==="Escape"&&C()});const be=e=>{S.classList.add("is-open"),document.querySelector("body").style.overflow="hidden",me(e)},C=()=>{document.querySelector("body").style.overflow="auto",S.classList.remove("is-open"),pe()},pe=()=>{p.hasAttribute("src")&&p.hasAttribute("alt")&&(p.removeAttribute("src"),p.removeAttribute("alt"),N.textContent="",T.textContent="",V.textContent="$0"),_=0,c=1,O.textContent="",z.closeAll(),document.querySelector(".error").classList.remove("is-open"),document.querySelector(".modal").style.overflow="auto"};de.addEventListener("click",e=>{c===0?h.info({title:"You have not selected anything",color:"yellow"}):h.info({title:`${c} ${c===1?"book":"books"} "${N.textContent}" by author ${T.textContent} Added`})});ae.addEventListener("click",e=>{h.success({title:"Thank you for your purchase"}),setTimeout(()=>{C()},1e3)});S.addEventListener("click",e=>{e.target===S&&C()});ue.addEventListener("click",e=>{const t=e.target.closest(".books-button");t&&be(t.id)});document.querySelector(".events-section")?.addEventListener("click",e=>{e.target.closest(".js-register")&&window.dispatchEvent(new CustomEvent("open-register-modal"))});document.addEventListener("DOMContentLoaded",function(){const e=document.querySelector(".modal.modal-contacts"),t=e?.querySelector(".modal_close-btn"),s=e?.querySelector("#contactForm");if(!e||!t)return;window.addEventListener("open-register-modal",function(){e.classList.add("is-open"),document.body.classList.add("modal-open"),document.querySelector("body").style.overflow="hidden"});function n(){e.classList.remove("is-open"),document.body.classList.remove("modal-open"),document.querySelector("body").style.overflow="auto",s&&s.reset()}t.addEventListener("click",n),e.addEventListener("click",function(o){o.target===e&&n()}),document.addEventListener("keydown",function(o){o.key==="Escape"&&e.classList.contains("is-open")&&n()}),s&&(s.addEventListener("submit",function(o){o.preventDefault();let i=!0;s.querySelectorAll("input[required]").forEach(l=>{l.value.trim()?l.classList.remove("invalid"):(l.classList.add("invalid"),i=!1)}),i&&(console.log("Форма отправлена!"),n())}),s.querySelectorAll(".form-control").forEach(o=>{o.addEventListener("input",function(){this.classList.remove("invalid")})}))});const g=document.getElementById("scrollToTop");window.addEventListener("scroll",()=>{window.scrollY>300&&document.body.style.overflow!=="hidden"?g.classList.add("show"):g.classList.remove("show")});g.addEventListener("click",()=>{window.scrollTo({top:0,behavior:"smooth"})});const ye=new MutationObserver(()=>{document.body.style.overflow==="hidden"?g.classList.remove("show"):window.scrollY>300&&g.classList.add("show")});ye.observe(document.body,{attributes:!0,attributeFilter:["style"]});
//# sourceMappingURL=index.js.map
