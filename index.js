import{a as A,S as R,N as Y,P as J,A as Q,i as w}from"./assets/vendor-BWZFsOUI.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const n of o)if(n.type==="childList")for(const i of n.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function s(o){const n={};return o.integrity&&(n.integrity=o.integrity),o.referrerPolicy&&(n.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?n.credentials="include":o.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function r(o){if(o.ep)return;o.ep=!0;const n=s(o);fetch(o.href,n)}})();const $=document.querySelector(".navbar-mobile"),X=document.querySelector(".menu-btn"),Z=document.querySelector(".navbar-close-btn"),ee=document.querySelectorAll(".navbar-nav-link");X.addEventListener("click",()=>{$.classList.add("is-open"),document.body.classList.add("menu-open")});Z.addEventListener("click",()=>{$.classList.remove("is-open"),document.body.classList.remove("menu-open")});ee.forEach(e=>{e.addEventListener("click",()=>{$.classList.remove("is-open"),document.body.classList.remove("menu-open")})});const k=new Swiper("#hero-swiper",{slidesPerView:1,loop:!1,speed:600,allowTouchMove:!1,effect:"fade",fadeEffect:{crossFade:!0},on:{slideChange:U}}),h=document.getElementById("hero-prev"),L=document.getElementById("hero-next");h.addEventListener("click",()=>k.slidePrev());L.addEventListener("click",()=>k.slideNext());function U(){h.disabled=k.isBeginning,L.disabled=k.isEnd,h.classList.toggle("disabled",h.disabled),L.classList.toggle("disabled",L.disabled)}U();let m=[],f=0;const te=4,y=document.getElementById("load-more"),u=document.getElementById("category-list"),B=document.getElementById("books-list"),F=document.getElementById("category-count"),E=document.querySelector(".loader-back");async function oe(){if(u)try{let t=(await A.get("https://books-backend.p.goit.global/books/category-list")).data;t.sort((i,c)=>i.list_name.localeCompare(c.list_name));const r=[{list_name:"All categories"},...t.filter(i=>i.list_name&&i.list_name.trim()!=="")].map(({list_name:i})=>`<li class="category-item">${i}</li>`).join("");u.innerHTML=r;const o=u.querySelector(".category-item");o&&o.classList.add("active"),u.addEventListener("click",i=>{const c=i.target.closest(".category-item");if(!c)return;u.querySelectorAll(".category-item").forEach(l=>l.classList.remove("active")),c.classList.add("active");const d=c.textContent;H(d),window.innerWidth<768&&u.classList.remove("show")});const n=document.querySelector(".dropdown-btn");n&&u&&(n.addEventListener("click",()=>{u.classList.toggle("show")}),window.addEventListener("resize",()=>{window.innerWidth>=768&&u.classList.remove("show")})),H("All categories")}catch(e){console.error("Помилка при завантаженні категорій:",e)}}async function H(e){if(B)try{ne();let t;e==="All categories"?t="https://books-backend.p.goit.global/books/top-books":t=`https://books-backend.p.goit.global/books/category?category=${encodeURIComponent(e)}`;let r=(await A.get(t)).data;e==="All categories"?r=r.flatMap(i=>i.books):r=r.flat(),r=r.filter((i,c,d)=>c===d.findIndex(l=>l.title===i.title)),m=r;const n=window.innerWidth<1440?10:24;f=Math.min(n,m.length),M(),P()}catch(t){console.error("Помилка при завантаженні книг:",t)}finally{se()}}function M(){B.innerHTML="";const e=m.slice(0,f),t=e.map(s=>{const r=s.title?s.title.toLowerCase():"без назви",o=s.author?s.author.toLowerCase():"невідомий автор",n=s.price||"немає ціни",i=s._id;return`
        <li class="books-item-wraper">
          <div class="book-item-container">
            <div class="books-img-wraper">
              <img src="${s.book_image||"https://via.placeholder.com/227x322?text=No+Image"}" alt="${r}" class="books-img"/>
            </div>
            <div class="books-info-wraper">
              <div class="books-text-wraper">
                <h4>${r}</h4>
                <p>${o}</p>
              </div>
              <div class="books-price-wraper">
                <p>$${n}</p>
              </div>
            </div>
            <div class="button-wraper">
              <button type="button" class="books-button btn" id="${i}">Learn More</button>
            </div>
          </div>
        </li>
      `}).join("");B.insertAdjacentHTML("beforeend",t),F&&(F.textContent=`Showing ${e.length} з ${m.length}`)}function P(){y&&(f>=m.length?y.style.display="none":y.style.display="block")}y&&y.addEventListener("click",()=>{f=Math.min(f+te,m.length),M(),P()});window.addEventListener("resize",()=>{if(!m.length)return;const t=window.innerWidth<1440?10:24;f<t&&(f=Math.min(t,m.length),M(),P())});document.addEventListener("DOMContentLoaded",()=>{oe()});function ne(){E&&(E.style.display="flex")}function se(){E&&(E.style.display="none")}document.addEventListener("DOMContentLoaded",()=>{const e=document.querySelectorAll(".feedback-cards .card"),t=document.querySelector(".arrow.left"),s=document.querySelector(".arrow.right"),r=document.querySelector(".dots"),o=4;let n=0;function i(){const l=window.innerWidth;return l<=400?1:l<=768?2:3}function c(){return Math.ceil(e.length/i())}function d(){const l=i(),W=c();e.forEach((g,p)=>{const D=n*l,K=D+l;g.style.display=p>=D&&p<K?"flex":"none"}),r.innerHTML="";for(let g=0;g<o;g++){const p=document.createElement("span");p.classList.add("dot"),p.classList.toggle("active",g===Math.min(n,o-1)),p.addEventListener("click",()=>{n=Math.floor(g*W/o),d()}),r.appendChild(p)}t.disabled=n===0,s.disabled=n>=W-1}t.addEventListener("click",()=>{n>0&&n--,d()}),s.addEventListener("click",()=>{n<c()-1&&n++,d()}),window.addEventListener("resize",()=>{const l=c();n>=l&&(n=l-1),d()}),d()});const v=new R(".events-swiper",{modules:[Y,J],wrapperClass:"events-list",slideClass:"events-item",slidesPerView:1,spaceBetween:24,breakpoints:{768:{slidesPerView:2,spaceBetween:24},1440:{slidesPerView:3,spaceBetween:24}},pagination:{el:".events-pagination",clickable:!0,bulletElement:"li",bulletClass:"events-dot",bulletActiveClass:"events-dot--active",renderBullet:(e,t)=>`<li class="${t}" aria-label="Go to slide ${e+1}" tabindex="0"></li>`},navigation:{prevEl:".events-swipe-btn-prev",nextEl:".events-swipe-btn-next"},watchOverflow:!0}),V=document.querySelector(".events-swipe-btn-prev"),j=document.querySelector(".events-swipe-btn-next");function q(){const e=v.isBeginning,t=v.isEnd;V.toggleAttribute("disabled",e),j.toggleAttribute("disabled",t),V.setAttribute("aria-disabled",String(e)),j.setAttribute("aria-disabled",String(t))}v.on("afterInit",q);v.on("slideChange",q);v.on("update",q);q();const re=async e=>await A.get(`https://books-backend.p.goit.global/books/${e}`),z=document.querySelector(".loader-back"),ie=document.querySelector(".count-block"),I=document.querySelector(".book-crd-author"),N=document.querySelector(".book-crd-title"),b=document.querySelector(".image"),ce=document.querySelector(".close-btn"),S=document.querySelector(".modal_back"),x=document.querySelector(".minus"),le=document.querySelector(".plus"),O=document.querySelector(".txt-count"),T=document.querySelector(".book-crd-price"),ae=document.querySelector(".accordion-container"),de=document.querySelector(".txt-details"),ue=document.querySelector(".add-btn"),me=document.querySelector(".buy-btn"),pe=document.querySelector(".books-list");let a=1,_=0;const G=new Q(ae,{collapse:!0,showMultiple:!0,duration:400,triggerClass:"ac-title",beforeOpen:e=>{e.querySelector(".icon-ac-down").classList.add("rotate")},beforeClose:e=>{e.querySelector(".icon-ac-down").classList.remove("rotate")}}),fe=async e=>{try{z.classList.toggle("is-open");const s=(await re(e)).data;_+=s.price,b.setAttribute("src",`${s.book_image}`),b.setAttribute("alt",`${s.title}`),N.textContent=s.title,I.textContent=s.author,T.textContent=`$${s.price}`,O.textContent=`${String(a)}`,de.textContent=s.description,G.update()}catch{document.querySelector(".error").classList.add("is-open"),document.querySelector(".modal").style.overflow="hidden",w.error({title:"Error",message:"Not found 404",position:"topCenter"})}finally{z.classList.toggle("is-open")}};ie.addEventListener("click",e=>{e.target===x?(a--,console.log("-")):e.target===le&&(a++,console.log("+")),a===0?x.disabled=!0:x.disabled=!1,O.textContent=`${String(a)}`,T.textContent=`$${String((a*Number(_)).toFixed(2))}`});ce.addEventListener("click",e=>{C()});document.addEventListener("keydown",e=>{e.key==="Escape"&&C()});const ge=e=>{S.classList.add("is-open"),document.querySelector("body").style.overflow="hidden",fe(e)},C=()=>{document.querySelector("body").style.overflow="auto",S.classList.remove("is-open"),be()},be=()=>{b.hasAttribute("src")&&b.hasAttribute("alt")&&(b.removeAttribute("src"),b.removeAttribute("alt"),N.textContent="",I.textContent="",T.textContent="$0"),_=0,a=1,O.textContent="",G.closeAll(),document.querySelector(".error").classList.remove("is-open"),document.querySelector(".modal").style.overflow="auto"};ue.addEventListener("click",e=>{a===0?w.info({title:"You have not selected anything",color:"yellow"}):w.info({title:`${a} ${a===1?"book":"books"} "${N.textContent}" by author ${I.textContent} Added`})});me.addEventListener("click",e=>{w.success({title:"Thank you for your purchase"}),setTimeout(()=>{C()},1e3)});S.addEventListener("click",e=>{e.target===S&&C()});pe.addEventListener("click",e=>{const t=e.target.closest(".books-button");t&&ge(t.id)});document.querySelector(".events-section")?.addEventListener("click",e=>{e.target.closest(".js-register")&&window.dispatchEvent(new CustomEvent("open-register-modal"))});document.addEventListener("DOMContentLoaded",function(){const e=document.querySelector(".modal.modal-contacts"),t=e?.querySelector(".modal_close-btn"),s=e?.querySelector("#contactForm");if(!e||!t)return;window.addEventListener("open-register-modal",function(){e.classList.add("is-open"),document.body.classList.add("modal-open")});function r(){e.classList.remove("is-open"),document.body.classList.remove("modal-open"),s&&s.reset()}t.addEventListener("click",r),e.addEventListener("click",function(o){o.target===e&&r()}),document.addEventListener("keydown",function(o){o.key==="Escape"&&e.classList.contains("is-open")&&r()}),s&&(s.addEventListener("submit",function(o){o.preventDefault();let n=!0;s.querySelectorAll("input[required]").forEach(c=>{c.value.trim()?c.classList.remove("invalid"):(c.classList.add("invalid"),n=!1)}),n&&(console.log("Форма отправлена!"),r())}),s.querySelectorAll(".form-control").forEach(o=>{o.addEventListener("input",function(){this.classList.remove("invalid")})}))});
//# sourceMappingURL=index.js.map
